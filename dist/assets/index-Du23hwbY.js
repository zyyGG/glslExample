var B=Object.defineProperty;var b=e=>{throw TypeError(e)};var U=(e,t,i)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var h=(e,t,i)=>U(e,typeof t!="symbol"?t+"":t,i),P=(e,t,i)=>t.has(e)||b("Cannot "+i);var R=(e,t,i)=>(P(e,t,"read from private field"),i?i.call(e):t.get(e)),m=(e,t,i)=>t.has(e)?b("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,i);var f=(e,t,i)=>(P(e,t,"access private method"),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(o){if(o.ep)return;o.ep=!0;const n=i(o);fetch(o.href,n)}})();const H="modulepreload",$=function(e){return"/"+e},T={},s=function(t,i,r){let o=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=Promise.allSettled(i.map(c=>{if(c=$(c),c in T)return;T[c]=!0;const u=c.endsWith(".css"),F=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${F}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":H,u||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),u)return new Promise((C,x)=>{g.addEventListener("load",C),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function n(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return o.then(a=>{for(const l of a||[])l.status==="rejected"&&n(l.reason);return t().catch(n)})},A=Object.assign({"./public/fragment/001_基本变换.glsl":()=>s(()=>import("./001_基本变换-C4bVFN4Q.js"),[]),"./public/fragment/002_雷达警告.frag":()=>s(()=>import("./002_雷达警告-DV64fbxm.js"),[]),"./public/fragment/003_边框虚幻效果.frag":()=>s(()=>import("./003_边框虚幻效果-DfjNafMO.js"),[]),"./public/fragment/004_带有光晕的球.frag":()=>s(()=>import("./004_带有光晕的球-Bf0WxiyJ.js"),[]),"./public/fragment/005_画一个点.frag":()=>s(()=>import("./005_画一个点-DwKSJdUl.js"),[]),"./public/fragment/006_极坐标.frag":()=>s(()=>import("./006_极坐标-CepONHKX.js"),[]),"./public/fragment/007_距离场.frag":()=>s(()=>import("./007_距离场-CdqwyiwP.js"),[]),"./public/fragment/008_fract空间分割.frag":()=>s(()=>import("./008_fract空间分割-Ysq58Rl8.js"),[]),"./public/fragment/009_雷达扫描效果.frag":()=>s(()=>import("./009_雷达扫描效果-DwVEa2SX.js"),[]),"./public/fragment/010_区分奇偶行.frag":()=>s(()=>import("./010_区分奇偶行-BleWKZVd.js"),[]),"./public/fragment/011_随机_基础.frag":()=>s(()=>import("./011_随机_基础-BCq8LY6r.js"),[]),"./public/fragment/012_随机_像素.frag":()=>s(()=>import("./012_随机_像素-vtgI0qkm.js"),[]),"./public/fragment/013_图案_矩阵.frag":()=>s(()=>import("./013_图案_矩阵-dfxcAymV.js"),[]),"./public/fragment/014_图案_偏移_砖墙效果.frag":()=>s(()=>import("./014_图案_偏移_砖墙效果-DZ0MuZkw.js"),[]),"./public/fragment/015_图案_偏移_横列效果.frag":()=>s(()=>import("./015_图案_偏移_横列效果-CK1BTCvE.js"),[]),"./public/fragment/016_噪声_示例1.frag":()=>s(()=>import("./016_噪声_示例1-YvNRCgR1.js"),[]),"./public/fragment/017_噪声_木头纹理.frag":()=>s(()=>import("./017_噪声_木头纹理-DqsO5WBC.js"),[]),"./public/fragment/018_噪声_基本.frag":()=>s(()=>import("./018_噪声_基本-XxKBzioF.js"),[]),"./public/fragment/019_噪声_Gradient_noise.frag":()=>s(()=>import("./019_噪声_Gradient_noise-DUaPOfre.js"),[]),"./public/fragment/020_噪声_moise一维函数.frag":()=>s(()=>import("./020_噪声_moise一维函数-D8FdaWwo.js"),[]),"./public/fragment/021_噪声_value-noise.frag":()=>s(()=>import("./021_噪声_value-noise-BpnfECBp.js"),[]),"./public/fragment/022_Worley噪声_基础.frag":()=>s(()=>import("./022_Worley噪声_基础-B3Z43YQy.js"),[]),"./public/fragment/023_Worley噪声_加强.frag":()=>s(()=>import("./023_Worley噪声_加强-CSFwKFef.js"),[]),"./public/fragment/024_FBM_基础噪声.frag":()=>s(()=>import("./024_FBM_基础噪声-CmXmBI5i.js"),[]),"./public/fragment/025_FBM_Worley噪声.frag":()=>s(()=>import("./025_FBM_Worley噪声-DbT7jowH.js"),[]),"./public/fragment/026_FBM_uv扰动.frag":()=>s(()=>import("./026_FBM_uv扰动-B8AcHg1R.js"),[]),"./public/fragment/027_SDF_circle.frag":()=>s(()=>import("./027_SDF_circle-DJbRlUyI.js"),[]),"./public/fragment/028_噪声_溶解效果.glsl":()=>s(()=>import("./028_噪声_溶解效果-CMu0Zz20.js"),[]),"./public/fragment/029_SDF_图形混合_基本规则.frag":()=>s(()=>import("./029_SDF_图形混合_基本规则-Bh47ZO9e.js"),[])});function N(){const e=[];for(const t in A){const i=A[t];if(/\.(frag|glsl)$/.test(i.name)){const r=i.name.replace(/^(\.\/public)/,""),o=r.split("/").pop().split(".")[0];e.push({name:o,path:r,img:`/images/${o}.png`})}}return e}function W(e){const t=document.querySelector(".example-list");t.innerHTML="",e.forEach(i=>{const r=document.createElement("div");r.className="example-item",r.innerHTML=`
      <img class="item-image" src="${i.img}" alt="Vite Logo" class="logo" onError="this.src='break.svg'" />
      <div class="item-title" title="${i.name}">${i.name}</div>
    `,r.addEventListener("click",()=>{D(i)}),t.appendChild(r)})}W(N());var p,L,_,y,E,S;class O{constructor(t){m(this,_);h(this,"gl",null);h(this,"canvas",null);h(this,"canvasContainer",null);h(this,"width",0);h(this,"height",0);h(this,"program",null);h(this,"uniforms");m(this,p,{});h(this,"attribute");m(this,L,{});h(this,"size",2);h(this,"vertexShader",`
  attribute vec2 a_position;

  void main() {
    vec2 zeroToOne = a_position;
    vec2 zeroToTwo = zeroToOne * 2.0;
    vec2 clipSpace = zeroToTwo - 1.0;
    gl_Position = vec4(clipSpace, 0.0, 1.0);
  }
  `);h(this,"fragmentShader",`
  #ifdef GL_ES
  precision mediump float;
  #endif

  uniform vec2 u_resolution;
  uniform float u_time;
  
  void main() {
    vec2 st = gl_FragCoord.xy / u_resolution;
    vec3 color = 0.5 + 0.5*cos(u_time + st.xyx + vec3(0,2,4));
    gl_FragColor = vec4(color, 1.0);
  }
  `);this.canvasContainer=document.querySelector(".canvas-container"),this.canvas=document.createElement("canvas"),this.width=this.canvasContainer.clientWidth,this.height=this.canvasContainer.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.style.backgroundColor="#3e3e3e",this.canvasContainer.appendChild(this.canvas),this.gl=this.canvas.getContext("webgl2"),this.gl.clearColor(0,0,0,1),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl||(console.error("WebGL not supported, falling back on experimental-webgl"),this.gl=this.canvas.getContext("experimental-webgl")),this.gl||alert("Your browser does not support WebGL"),t=t||{},this.vertexShader=t.vertexShader||this.vertexShader,this.fragmentShader=t.fragmentShader||this.fragmentShader,f(this,_,y).call(this),this.canvas.addEventListener("mousemove",i=>{this.uniforms.u_mouse.value=[i.offsetX,this.height-i.offsetY]}),window.addEventListener("resize",()=>{this.width=this.canvasContainer.clientWidth,this.height=this.canvasContainer.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.gl.viewport(0,0,this.width,this.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.clearColor(0,0,0,1)})}draw(t=!1){t&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.clearColor(1,0,0,1)),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}destory(){try{this.gl.deleteProgram(this.program),this.canvas&&(document.querySelector(".canvas-container").innerHTML="")}catch(t){console.log("destory error",t)}}}p=new WeakMap,L=new WeakMap,_=new WeakSet,y=function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height);const t=f(this,_,E).call(this,this.gl.VERTEX_SHADER,this.vertexShader),i=f(this,_,E).call(this,this.gl.FRAGMENT_SHADER,this.fragmentShader);this.program=f(this,_,S).call(this,t,i),this.gl.useProgram(this.program),this.uniforms=new Proxy(R(this,p),{set:(a,l,c)=>(Object.defineProperty(c,"value",{get:()=>c._value,set:u=>{c._value=u,this.gl[`uniform${c.type}`](this.gl.getUniformLocation(this.program,l),c._value)}}),this.gl[`uniform${c.type}`](this.gl.getUniformLocation(this.program,l),c._value),Reflect.set(a,l,c)),get:(a,l)=>Reflect.get(a,l)}),this.uniforms.u_resolution={type:"2fv",_value:[this.width,this.height]},this.uniforms.u_time={type:"1f",_value:0},this.uniforms.u_mouse={type:"2fv",_value:[0,0]};const r=this.gl.getAttribLocation(this.program,"a_position");this.gl.enableVertexAttribArray(r);const o=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o);const n=new Float32Array([0+this.width,0,0,0,0,0+this.height,0+this.width,0,0,0+this.height,0+this.width,0+this.height]);this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(n),this.gl.STATIC_DRAW),this.size=2,this.gl.vertexAttribPointer(r,this.size,this.gl.FLOAT,!1,0,0)},E=function(t,i){const r=this.gl.createShader(t);if(this.gl.shaderSource(r,i),this.gl.compileShader(r),this.gl.getShaderParameter(r,this.gl.COMPILE_STATUS))return r;console.log(this.gl.getShaderInfoLog(r)),this.gl.deleteShader(r)},S=function(t,i){const r=this.gl.createProgram();return this.gl.attachShader(r,t),this.gl.attachShader(r,i),this.gl.linkProgram(r),r};let d=new O,v=0;function I(e){if(v){const t=(e-v)/1200;d.uniforms.u_time.value+=t}requestAnimationFrame(I),d.draw(),v=e}I(0);async function D(e){d.destory();try{let t=await fetch(e.path).then(r=>r.text());t=await V(t),d=new O({fragmentShader:t});const i=new URL(window.location.href);i.searchParams.set("info",JSON.stringify(e).trim()),window.history.pushState({},"",i.href)}catch(t){console.log(t)}}async function V(e){const t=/^\s*#include.*$/gm,i=e.match(t);if(i&&i.length>0){for(let r=0;r<i.length;r++){const o=i[r];let n=o.match(/"(.*)"/)[1];n.startsWith("./")?n=n.replace(/^\.\//,"fragment/"):n.startsWith("../")?n=n.replace(/^(\.\.\/)/,"/"):n="fragment/"+n;const a=await fetch(n).then(l=>l.text());e=e.replace(o,`
${a}
`)}e=await V(e)}return e}const z=new URL(window.location.href),w=z.searchParams.get("info");if(w){const e=JSON.parse(w);D(e)}
