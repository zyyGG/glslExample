var U=Object.defineProperty;var T=r=>{throw TypeError(r)};var $=(r,t,e)=>t in r?U(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var c=(r,t,e)=>$(r,typeof t!="symbol"?t+"":t,e),A=(r,t,e)=>t.has(r)||T("Cannot "+e);var w=(r,t,e)=>(A(r,t,"read from private field"),e?e.call(r):t.get(r)),v=(r,t,e)=>t.has(r)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e);var p=(r,t,e)=>(A(r,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(o){if(o.ep)return;o.ep=!0;const a=e(o);fetch(o.href,a)}})();const H="modulepreload",N=function(r,t){return new URL(r,t).href},y={},s=function(t,e,i){let o=Promise.resolve();if(e&&e.length>0){const l=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),h=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));o=Promise.allSettled(e.map(_=>{if(_=N(_,i),_ in y)return;y[_]=!0;const g=_.endsWith(".css"),B=g?'[rel="stylesheet"]':"";if(!!i)for(let f=l.length-1;f>=0;f--){const d=l[f];if(d.href===_&&(!g||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_}"]${B}`))return;const u=document.createElement("link");if(u.rel=g?"stylesheet":H,g||(u.as="script"),u.crossOrigin="",u.href=_,h&&u.setAttribute("nonce",h),document.head.appendChild(u),g)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${_}`)))})}))}function a(l){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=l,window.dispatchEvent(n),!n.defaultPrevented)throw l}return o.then(l=>{for(const n of l||[])n.status==="rejected"&&a(n.reason);return t().catch(a)})},O=Object.assign({"./public/fragment/001_基本变换.glsl":()=>s(()=>import("./001_基本变换-C4bVFN4Q.js"),[],import.meta.url),"./public/fragment/002_雷达警告.frag":()=>s(()=>import("./002_雷达警告-DV64fbxm.js"),[],import.meta.url),"./public/fragment/003_边框虚幻效果.frag":()=>s(()=>import("./003_边框虚幻效果-DfjNafMO.js"),[],import.meta.url),"./public/fragment/004_带有光晕的球.frag":()=>s(()=>import("./004_带有光晕的球-Bf0WxiyJ.js"),[],import.meta.url),"./public/fragment/005_画一个点.frag":()=>s(()=>import("./005_画一个点-DwKSJdUl.js"),[],import.meta.url),"./public/fragment/006_极坐标.frag":()=>s(()=>import("./006_极坐标-CepONHKX.js"),[],import.meta.url),"./public/fragment/007_距离场.frag":()=>s(()=>import("./007_距离场-CdqwyiwP.js"),[],import.meta.url),"./public/fragment/008_fract空间分割.frag":()=>s(()=>import("./008_fract空间分割-Ysq58Rl8.js"),[],import.meta.url),"./public/fragment/009_雷达扫描效果.frag":()=>s(()=>import("./009_雷达扫描效果-DwVEa2SX.js"),[],import.meta.url),"./public/fragment/010_区分奇偶行.frag":()=>s(()=>import("./010_区分奇偶行-BleWKZVd.js"),[],import.meta.url),"./public/fragment/011_随机_基础.frag":()=>s(()=>import("./011_随机_基础-BCq8LY6r.js"),[],import.meta.url),"./public/fragment/012_随机_像素.frag":()=>s(()=>import("./012_随机_像素-vtgI0qkm.js"),[],import.meta.url),"./public/fragment/013_图案_矩阵.frag":()=>s(()=>import("./013_图案_矩阵-dfxcAymV.js"),[],import.meta.url),"./public/fragment/014_图案_偏移_砖墙效果.frag":()=>s(()=>import("./014_图案_偏移_砖墙效果-DZ0MuZkw.js"),[],import.meta.url),"./public/fragment/015_图案_偏移_横列效果.frag":()=>s(()=>import("./015_图案_偏移_横列效果-CK1BTCvE.js"),[],import.meta.url),"./public/fragment/016_噪声_示例1.frag":()=>s(()=>import("./016_噪声_示例1-YvNRCgR1.js"),[],import.meta.url),"./public/fragment/017_噪声_木头纹理.frag":()=>s(()=>import("./017_噪声_木头纹理-DqsO5WBC.js"),[],import.meta.url),"./public/fragment/018_噪声_基本.frag":()=>s(()=>import("./018_噪声_基本-XxKBzioF.js"),[],import.meta.url),"./public/fragment/019_噪声_Gradient_noise.frag":()=>s(()=>import("./019_噪声_Gradient_noise-DUaPOfre.js"),[],import.meta.url),"./public/fragment/020_噪声_moise一维函数.frag":()=>s(()=>import("./020_噪声_moise一维函数-D8FdaWwo.js"),[],import.meta.url),"./public/fragment/021_噪声_value-noise.frag":()=>s(()=>import("./021_噪声_value-noise-BpnfECBp.js"),[],import.meta.url),"./public/fragment/022_Worley噪声_基础.frag":()=>s(()=>import("./022_Worley噪声_基础-B3Z43YQy.js"),[],import.meta.url),"./public/fragment/023_Worley噪声_加强.frag":()=>s(()=>import("./023_Worley噪声_加强-CSFwKFef.js"),[],import.meta.url),"./public/fragment/024_FBM_基础噪声.frag":()=>s(()=>import("./024_FBM_基础噪声-CmXmBI5i.js"),[],import.meta.url),"./public/fragment/025_FBM_Worley噪声.frag":()=>s(()=>import("./025_FBM_Worley噪声-DbT7jowH.js"),[],import.meta.url),"./public/fragment/026_FBM_uv扰动.frag":()=>s(()=>import("./026_FBM_uv扰动-B8AcHg1R.js"),[],import.meta.url),"./public/fragment/027_SDF_circle.frag":()=>s(()=>import("./027_SDF_circle-DJbRlUyI.js"),[],import.meta.url),"./public/fragment/028_噪声_溶解效果.glsl":()=>s(()=>import("./028_噪声_溶解效果-CMu0Zz20.js"),[],import.meta.url),"./public/fragment/029_SDF_图形混合_基本规则.frag":()=>s(()=>import("./029_SDF_图形混合_基本规则-Bh47ZO9e.js"),[],import.meta.url)});function W(){const r=[];console.log("production");for(const t in O){const e=O[t];if(/\.(frag|glsl)$/.test(e.name)){const i=e.name.replace(/^(\.\/public)/,""),o=i.split("/").pop().split(".")[0];r.push({name:o,path:i,img:`./images/${o}.png`})}}return r}function k(r){const t=document.querySelector(".example-list");t.innerHTML="",r.forEach(e=>{const i=document.createElement("div");i.className="example-item",i.innerHTML=`
      <img class="item-image" src="${e.img}" alt="Vite Logo" class="logo" onError="this.src='break.svg'" />
      <div class="item-title" title="${e.name}">${e.name}</div>
    `,i.addEventListener("click",()=>{C(e)}),t.appendChild(i)})}k(W());var L,P,m,D,R,V;class I{constructor(t){v(this,m);c(this,"gl",null);c(this,"canvas",null);c(this,"canvasContainer",null);c(this,"width",0);c(this,"height",0);c(this,"program",null);c(this,"uniforms");v(this,L,{});c(this,"attribute");v(this,P,{});c(this,"size",2);c(this,"vertexShader",`
  attribute vec2 a_position;

  void main() {
    vec2 zeroToOne = a_position;
    vec2 zeroToTwo = zeroToOne * 2.0;
    vec2 clipSpace = zeroToTwo - 1.0;
    gl_Position = vec4(clipSpace, 0.0, 1.0);
  }
  `);c(this,"fragmentShader",`
  #ifdef GL_ES
  precision mediump float;
  #endif

  uniform vec2 u_resolution;
  uniform float u_time;
  
  void main() {
    vec2 st = gl_FragCoord.xy / u_resolution;
    vec3 color = 0.5 + 0.5*cos(u_time + st.xyx + vec3(0,2,4));
    gl_FragColor = vec4(color, 1.0);
  }
  `);this.canvasContainer=document.querySelector(".canvas-container"),this.canvas=document.createElement("canvas"),this.width=this.canvasContainer.clientWidth,this.height=this.canvasContainer.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.style.backgroundColor="#3e3e3e",this.canvasContainer.appendChild(this.canvas),this.gl=this.canvas.getContext("webgl2"),this.gl.clearColor(0,0,0,1),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl||(console.error("WebGL not supported, falling back on experimental-webgl"),this.gl=this.canvas.getContext("experimental-webgl")),this.gl||alert("Your browser does not support WebGL"),t=t||{},this.vertexShader=t.vertexShader||this.vertexShader,this.fragmentShader=t.fragmentShader||this.fragmentShader,p(this,m,D).call(this),this.canvas.addEventListener("mousemove",e=>{this.uniforms.u_mouse.value=[e.offsetX,this.height-e.offsetY]}),window.addEventListener("resize",()=>{this.width=this.canvasContainer.clientWidth,this.height=this.canvasContainer.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.gl.viewport(0,0,this.width,this.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.clearColor(0,0,0,1)})}draw(t=!1){t&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.clearColor(1,0,0,1)),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}destory(){try{this.gl.deleteProgram(this.program),this.canvas&&(document.querySelector(".canvas-container").innerHTML="")}catch(t){console.log("destory error",t)}}}L=new WeakMap,P=new WeakMap,m=new WeakSet,D=function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height);const t=p(this,m,R).call(this,this.gl.VERTEX_SHADER,this.vertexShader),e=p(this,m,R).call(this,this.gl.FRAGMENT_SHADER,this.fragmentShader);this.program=p(this,m,V).call(this,t,e),this.gl.useProgram(this.program),this.uniforms=new Proxy(w(this,L),{set:(l,n,h)=>(Object.defineProperty(h,"value",{get:()=>h._value,set:_=>{h._value=_,this.gl[`uniform${h.type}`](this.gl.getUniformLocation(this.program,n),h._value)}}),this.gl[`uniform${h.type}`](this.gl.getUniformLocation(this.program,n),h._value),Reflect.set(l,n,h)),get:(l,n)=>Reflect.get(l,n)}),this.uniforms.u_resolution={type:"2fv",_value:[this.width,this.height]},this.uniforms.u_time={type:"1f",_value:0},this.uniforms.u_mouse={type:"2fv",_value:[0,0]};const i=this.gl.getAttribLocation(this.program,"a_position");this.gl.enableVertexAttribArray(i);const o=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,o);const a=new Float32Array([0+this.width,0,0,0,0,0+this.height,0+this.width,0,0,0+this.height,0+this.width,0+this.height]);this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(a),this.gl.STATIC_DRAW),this.size=2,this.gl.vertexAttribPointer(i,this.size,this.gl.FLOAT,!1,0,0)},R=function(t,e){const i=this.gl.createShader(t);if(this.gl.shaderSource(i,e),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))return i;console.log(this.gl.getShaderInfoLog(i)),this.gl.deleteShader(i)},V=function(t,e){const i=this.gl.createProgram();return this.gl.attachShader(i,t),this.gl.attachShader(i,e),this.gl.linkProgram(i),i};let E=new I,b=0;function F(r){if(b){const t=(r-b)/1200;E.uniforms.u_time.value+=t}requestAnimationFrame(F),E.draw(),b=r}F(0);async function C(r){E.destory();const t=`.${r.path}`;console.log(t);try{let e=await fetch(t).then(o=>o.text());e=await x(e),E=new I({fragmentShader:e});const i=new URL(window.location.href);i.searchParams.set("info",JSON.stringify(r).trim()),window.history.pushState({},"",i.href)}catch(e){console.log(e)}}async function x(r){const t=/^\s*#include.*$/gm,e=r.match(t);if(e&&e.length>0){for(let i=0;i<e.length;i++){const o=e[i];let a=o.match(/"(.*)"/)[1];a.startsWith("./")?a=a.replace(/^\.\//,"fragment/"):a.startsWith("../")?a=a.replace(/^(\.\.\/)/,"/"):a="fragment/"+a;const l=await fetch(a).then(n=>n.text());r=r.replace(o,`
${l}
`)}r=await x(r)}return r}const z=new URL(window.location.href),S=z.searchParams.get("info");if(S){const r=JSON.parse(S);C(r)}
