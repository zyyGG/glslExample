var U=Object.defineProperty;var T=e=>{throw TypeError(e)};var $=(e,t,r)=>t in e?U(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var c=(e,t,r)=>$(e,typeof t!="symbol"?t+"":t,r),A=(e,t,r)=>t.has(e)||T("Cannot "+r);var w=(e,t,r)=>(A(e,t,"read from private field"),r?r.call(e):t.get(e)),v=(e,t,r)=>t.has(e)?T("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);var p=(e,t,r)=>(A(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();const H="modulepreload",N=function(e,t){return new URL(e,t).href},y={},o=function(t,r,i){let s=Promise.resolve();if(r&&r.length>0){const l=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),h=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));s=Promise.allSettled(r.map(_=>{if(_=N(_,i),_ in y)return;y[_]=!0;const g=_.endsWith(".css"),B=g?'[rel="stylesheet"]':"";if(!!i)for(let f=l.length-1;f>=0;f--){const d=l[f];if(d.href===_&&(!g||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_}"]${B}`))return;const u=document.createElement("link");if(u.rel=g?"stylesheet":H,g||(u.as="script"),u.crossOrigin="",u.href=_,h&&u.setAttribute("nonce",h),document.head.appendChild(u),g)return new Promise((f,d)=>{u.addEventListener("load",f),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${_}`)))})}))}function a(l){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=l,window.dispatchEvent(n),!n.defaultPrevented)throw l}return s.then(l=>{for(const n of l||[])n.status==="rejected"&&a(n.reason);return t().catch(a)})},O=Object.assign({"./public/fragment/001_基本变换.glsl":()=>o(()=>import("./001_基本变换-C4bVFN4Q.js"),[],import.meta.url),"./public/fragment/002_雷达警告.frag":()=>o(()=>import("./002_雷达警告-DV64fbxm.js"),[],import.meta.url),"./public/fragment/003_边框虚幻效果.frag":()=>o(()=>import("./003_边框虚幻效果-DfjNafMO.js"),[],import.meta.url),"./public/fragment/004_带有光晕的球.frag":()=>o(()=>import("./004_带有光晕的球-Bf0WxiyJ.js"),[],import.meta.url),"./public/fragment/005_画一个点.frag":()=>o(()=>import("./005_画一个点-DwKSJdUl.js"),[],import.meta.url),"./public/fragment/006_极坐标.frag":()=>o(()=>import("./006_极坐标-CepONHKX.js"),[],import.meta.url),"./public/fragment/007_距离场.frag":()=>o(()=>import("./007_距离场-CdqwyiwP.js"),[],import.meta.url),"./public/fragment/008_fract空间分割.frag":()=>o(()=>import("./008_fract空间分割-Ysq58Rl8.js"),[],import.meta.url),"./public/fragment/009_雷达扫描效果.frag":()=>o(()=>import("./009_雷达扫描效果-DwVEa2SX.js"),[],import.meta.url),"./public/fragment/010_区分奇偶行.frag":()=>o(()=>import("./010_区分奇偶行-BleWKZVd.js"),[],import.meta.url),"./public/fragment/011_随机_基础.frag":()=>o(()=>import("./011_随机_基础-BCq8LY6r.js"),[],import.meta.url),"./public/fragment/012_随机_像素.frag":()=>o(()=>import("./012_随机_像素-vtgI0qkm.js"),[],import.meta.url),"./public/fragment/013_图案_矩阵.frag":()=>o(()=>import("./013_图案_矩阵-dfxcAymV.js"),[],import.meta.url),"./public/fragment/014_图案_偏移_砖墙效果.frag":()=>o(()=>import("./014_图案_偏移_砖墙效果-DZ0MuZkw.js"),[],import.meta.url),"./public/fragment/015_图案_偏移_横列效果.frag":()=>o(()=>import("./015_图案_偏移_横列效果-CK1BTCvE.js"),[],import.meta.url),"./public/fragment/016_噪声_示例1.frag":()=>o(()=>import("./016_噪声_示例1-YvNRCgR1.js"),[],import.meta.url),"./public/fragment/017_噪声_木头纹理.frag":()=>o(()=>import("./017_噪声_木头纹理-DqsO5WBC.js"),[],import.meta.url),"./public/fragment/018_噪声_基本.frag":()=>o(()=>import("./018_噪声_基本-XxKBzioF.js"),[],import.meta.url),"./public/fragment/019_噪声_Gradient_noise.frag":()=>o(()=>import("./019_噪声_Gradient_noise-DUaPOfre.js"),[],import.meta.url),"./public/fragment/020_噪声_moise一维函数.frag":()=>o(()=>import("./020_噪声_moise一维函数-D8FdaWwo.js"),[],import.meta.url),"./public/fragment/021_噪声_value-noise.frag":()=>o(()=>import("./021_噪声_value-noise-BpnfECBp.js"),[],import.meta.url),"./public/fragment/022_Worley噪声_基础.frag":()=>o(()=>import("./022_Worley噪声_基础-B3Z43YQy.js"),[],import.meta.url),"./public/fragment/023_Worley噪声_加强.frag":()=>o(()=>import("./023_Worley噪声_加强-CSFwKFef.js"),[],import.meta.url),"./public/fragment/024_FBM_基础噪声.frag":()=>o(()=>import("./024_FBM_基础噪声-CmXmBI5i.js"),[],import.meta.url),"./public/fragment/025_FBM_Worley噪声.frag":()=>o(()=>import("./025_FBM_Worley噪声-DbT7jowH.js"),[],import.meta.url),"./public/fragment/026_FBM_uv扰动.frag":()=>o(()=>import("./026_FBM_uv扰动-B8AcHg1R.js"),[],import.meta.url),"./public/fragment/027_SDF_circle.frag":()=>o(()=>import("./027_SDF_circle-DJbRlUyI.js"),[],import.meta.url),"./public/fragment/028_噪声_溶解效果.glsl":()=>o(()=>import("./028_噪声_溶解效果-CMu0Zz20.js"),[],import.meta.url),"./public/fragment/029_SDF_图形混合_基本规则.frag":()=>o(()=>import("./029_SDF_图形混合_基本规则-Bh47ZO9e.js"),[],import.meta.url)});function W(){const e=[];console.log("production");for(const t in O){const r=O[t];if(/\.(frag|glsl)$/.test(r.name)){const i=r.name.replace(/^(\.\/public)/,""),s=i.split("/").pop().split(".")[0];e.push({name:`/glslExample/${s}`,path:`/glslExample${i.replace(/^\./,"")}`,img:`/glslExample/images/${s}.png`})}}return e}function k(e){const t=document.querySelector(".example-list");t.innerHTML="",e.forEach(r=>{const i=document.createElement("div");i.className="example-item",i.innerHTML=`
      <img class="item-image" src="${r.img}" alt="Vite Logo" class="logo" onError="this.src='break.svg'" />
      <div class="item-title" title="${r.name}">${r.name}</div>
    `,i.addEventListener("click",()=>{F(r)}),t.appendChild(i)})}k(W());var L,P,m,D,R,x;class I{constructor(t){v(this,m);c(this,"gl",null);c(this,"canvas",null);c(this,"canvasContainer",null);c(this,"width",0);c(this,"height",0);c(this,"program",null);c(this,"uniforms");v(this,L,{});c(this,"attribute");v(this,P,{});c(this,"size",2);c(this,"vertexShader",`
  attribute vec2 a_position;

  void main() {
    vec2 zeroToOne = a_position;
    vec2 zeroToTwo = zeroToOne * 2.0;
    vec2 clipSpace = zeroToTwo - 1.0;
    gl_Position = vec4(clipSpace, 0.0, 1.0);
  }
  `);c(this,"fragmentShader",`
  #ifdef GL_ES
  precision mediump float;
  #endif

  uniform vec2 u_resolution;
  uniform float u_time;
  
  void main() {
    vec2 st = gl_FragCoord.xy / u_resolution;
    vec3 color = 0.5 + 0.5*cos(u_time + st.xyx + vec3(0,2,4));
    gl_FragColor = vec4(color, 1.0);
  }
  `);this.canvasContainer=document.querySelector(".canvas-container"),this.canvas=document.createElement("canvas"),this.width=this.canvasContainer.clientWidth,this.height=this.canvasContainer.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.canvas.style.backgroundColor="#3e3e3e",this.canvasContainer.appendChild(this.canvas),this.gl=this.canvas.getContext("webgl2"),this.gl.clearColor(0,0,0,1),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl||(console.error("WebGL not supported, falling back on experimental-webgl"),this.gl=this.canvas.getContext("experimental-webgl")),this.gl||alert("Your browser does not support WebGL"),t=t||{},this.vertexShader=t.vertexShader||this.vertexShader,this.fragmentShader=t.fragmentShader||this.fragmentShader,p(this,m,D).call(this),this.canvas.addEventListener("mousemove",r=>{this.uniforms.u_mouse.value=[r.offsetX,this.height-r.offsetY]}),window.addEventListener("resize",()=>{this.width=this.canvasContainer.clientWidth,this.height=this.canvasContainer.clientHeight,this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px",this.gl.viewport(0,0,this.width,this.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.clearColor(0,0,0,1)})}draw(t=!1){t&&(this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.clearColor(1,0,0,1)),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}destory(){try{this.gl.deleteProgram(this.program),this.canvas&&(document.querySelector(".canvas-container").innerHTML="")}catch(t){console.log("destory error",t)}}}L=new WeakMap,P=new WeakMap,m=new WeakSet,D=function(){this.gl.clearColor(0,0,0,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height);const t=p(this,m,R).call(this,this.gl.VERTEX_SHADER,this.vertexShader),r=p(this,m,R).call(this,this.gl.FRAGMENT_SHADER,this.fragmentShader);this.program=p(this,m,x).call(this,t,r),this.gl.useProgram(this.program),this.uniforms=new Proxy(w(this,L),{set:(l,n,h)=>(Object.defineProperty(h,"value",{get:()=>h._value,set:_=>{h._value=_,this.gl[`uniform${h.type}`](this.gl.getUniformLocation(this.program,n),h._value)}}),this.gl[`uniform${h.type}`](this.gl.getUniformLocation(this.program,n),h._value),Reflect.set(l,n,h)),get:(l,n)=>Reflect.get(l,n)}),this.uniforms.u_resolution={type:"2fv",_value:[this.width,this.height]},this.uniforms.u_time={type:"1f",_value:0},this.uniforms.u_mouse={type:"2fv",_value:[0,0]};const i=this.gl.getAttribLocation(this.program,"a_position");this.gl.enableVertexAttribArray(i);const s=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,s);const a=new Float32Array([0+this.width,0,0,0,0,0+this.height,0+this.width,0,0,0+this.height,0+this.width,0+this.height]);this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(a),this.gl.STATIC_DRAW),this.size=2,this.gl.vertexAttribPointer(i,this.size,this.gl.FLOAT,!1,0,0)},R=function(t,r){const i=this.gl.createShader(t);if(this.gl.shaderSource(i,r),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS))return i;console.log(this.gl.getShaderInfoLog(i)),this.gl.deleteShader(i)},x=function(t,r){const i=this.gl.createProgram();return this.gl.attachShader(i,t),this.gl.attachShader(i,r),this.gl.linkProgram(i),i};let E=new I,b=0;function V(e){if(b){const t=(e-b)/1200;E.uniforms.u_time.value+=t}requestAnimationFrame(V),E.draw(),b=e}V(0);async function F(e){E.destory();try{let t=await fetch(e.path).then(i=>i.text());t=await C(t),E=new I({fragmentShader:t});const r=new URL(window.location.href);r.searchParams.set("info",JSON.stringify(e).trim()),window.history.pushState({},"",r.href)}catch(t){console.log(t)}}async function C(e){const t=/^\s*#include.*$/gm,r=e.match(t);if(r&&r.length>0){for(let i=0;i<r.length;i++){const s=r[i];let a=s.match(/"(.*)"/)[1];a.startsWith("./")?a=a.replace(/^\.\//,"/glslExample/fragment/"):a.startsWith("../")?a=a.replace(/^(\.\.\/)/,"/glslExample/"):a="/glslExample/fragment/"+a;const l=await fetch(a).then(n=>n.text());e=e.replace(s,`
${l}
`)}e=await C(e)}return e}const z=new URL(window.location.href),S=z.searchParams.get("info");if(S){const e=JSON.parse(S);F(e)}
